---
name: summary-template
description: "Template for execution summaries (SUMMARY.md)"
type: template
version: 0.1.0
output_pattern: ".planning/phases/{N}/{phase-name}-SUMMARY.md"
---

<!--
COMPLETION CRITERIA REFERENCE:
This template implements evidence requirements from:
  template/governance/completion-definitions.yaml Section 6

Per workflow evidence requirements for execute_phase:
  - "SUMMARY.md with task outcomes"
  - "progress.json checkpoint"
  - "all tasks resolved"

Every completion must have:
  - artifact: "Measurable output proving work done"
  - state_update: "state.json reflects new status"
  - history_entry: "Action logged with timestamp"
-->

# Summary Template

Generates the SUMMARY.md document that records execution outcomes.

## Frontmatter Schema

```yaml
---
type: summary
phase: "{phase_number}"
phase_name: "{phase_name}"
status: "in_progress|completed|partial|failed"
created: "{iso_timestamp}"
updated: "{iso_timestamp}"
executed_by: "idumb-builder"
tasks_total: "{number}"
tasks_completed: "{number}"
tasks_failed: "{number}"
tasks_skipped: "{number}"
execution_time: "{duration}"
---
```

## Document Structure

```markdown
# Phase {N}: {Phase Name} - Execution Summary

## Overview

| Metric | Value |
|--------|-------|
| Total Tasks | {count} |
| Completed | {count} ‚úÖ |
| Failed | {count} ‚ùå |
| Skipped | {count} ‚è≠Ô∏è |
| Duration | {time} |
| Status | {status} |

## Completed Tasks

### ‚úÖ T{N}-001: {Task Title}

- **Completed At:** {timestamp}
- **Duration:** {time}
- **Output:**
  - Created `{path/to/file}`
  - Modified `{path/to/file}`
- **Validation:** Passed
- **Notes:** {Any relevant notes}

### ‚úÖ T{N}-002: {Task Title}

{Same structure}

## Failed Tasks

### ‚ùå T{N}-003: {Task Title}

- **Failed At:** {timestamp}
- **Attempts:** {count}
- **Error:** 
  ```
  {error message}
  ```
- **Impact:** {What this blocks}
- **Recovery:** {Suggested action}

## Skipped Tasks

### ‚è≠Ô∏è T{N}-004: {Task Title}

- **Reason:** {Why skipped}
- **Blocked By:** {task ID or external reason}
- **Deferred To:** {future phase or "manual"}

## Deviations from Plan

| Planned | Actual | Reason |
|---------|--------|--------|
| {Expected action} | {What happened} | {Why different} |

## Files Modified

```
{List of all files created/modified/deleted}
- ‚úÖ Created: path/to/new/file.ts
- üìù Modified: path/to/existing/file.ts
- ‚ùå Deleted: path/to/removed/file.ts
```

## Checkpoints

| Checkpoint | Task | Git Hash | Status |
|------------|------|----------|--------|
| checkpoint-T{N}-001 | T{N}-001 | {short hash} | ‚úÖ |
| checkpoint-T{N}-002 | T{N}-002 | {short hash} | ‚úÖ |

## Next Steps

Based on execution results:

1. {Recommended next action}
2. {If failures: recovery steps}
3. {Link to verify-phase}

---
*Generated by iDumb summary-template v0.1.0*
```

## Task Result Schema

```yaml
task_result:
  id: "T{phase}-{seq}"
  status: "completed|failed|skipped"
  started_at: timestamp
  completed_at: timestamp
  duration: duration
  
  if_completed:
    outputs: array<path>
    validation: "passed|warning"
    
  if_failed:
    attempts: number
    error: string
    recovery: string
    
  if_skipped:
    reason: string
    blocked_by: string|null
```

## Generation Rules

```yaml
generation:
  required_sections:
    - overview (table)
    - completed_tasks OR failed_tasks
    - files_modified
    
  optional_sections:
    - deviations
    - checkpoints
    - next_steps
    
  auto_calculate:
    - task counts from results
    - duration from timestamps
    - status from success rate
```

## Usage

```yaml
triggered_by:
  - "workflows/execute-phase.md step 5"
  - "Execution completion"
  
consumed_by:
  - "workflows/verify-phase.md step 2"
  - "idumb-low-validator"
```
