---
name: verification-template
id: tpl-verification
parent: templates
description: "Template for verification reports (VERIFICATION.md)"
type: template
version: 0.1.0
output_pattern: ".planning/phases/{N}/{phase-name}-VERIFICATION.md"
---

<!--
COMPLETION CRITERIA REFERENCE:
This template implements evidence requirements from:
  template/governance/completion-definitions.yaml Section 6

Per workflow evidence requirements for verify_work:
  - "VERIFICATION.md with all criteria checked"
  - "evidence for each criterion"
  - "PASS | PARTIAL | FAIL status"

Every completion must have:
  - artifact: "Measurable output proving work done"
  - state_update: "state.json reflects new status"
  - history_entry: "Action logged with timestamp"
-->

# Verification Template

Generates the VERIFICATION.md document that proves phase completion through evidence.

## Frontmatter Schema

```yaml
---
type: verification
phase: "{phase_number}"
phase_name: "{phase_name}"
status: "verified|needs_work|blocked"
created: "{iso_timestamp}"
validator: "idumb-low-validator"
pass_rate: "{percentage}"
criteria_total: "{number}"
criteria_passed: "{number}"
criteria_failed: "{number}"
---
```

## Document Structure

```markdown
# Phase {N}: {Phase Name} - Verification Report

## Summary

| Status | Count | Percentage |
|--------|-------|------------|
| ‚úÖ Passed | {n} | {%} |
| ‚ö†Ô∏è Partial | {n} | {%} |
| ‚ùå Failed | {n} | {%} |
| üö´ Blocked | {n} | {%} |

**Overall Result:** {VERIFIED | NEEDS WORK | BLOCKED}

## Criteria Verification

### ‚úÖ Criterion 1: {Description}

**Status:** PASSED

**Evidence:**
```
{grep/glob output or test result}
```

**Files:** 
- `src/path/to/file.ts:42` - Pattern found
- `tests/path/to/test.ts:15` - Test passes

---

### ‚ö†Ô∏è Criterion 2: {Description}

**Status:** PARTIAL

**Evidence:**
```
{Partial evidence}
```

**Gap:** {What's missing}

**Recommendation:** {How to complete}

---

### ‚ùå Criterion 3: {Description}

**Status:** FAILED

**Expected Evidence:** {What we looked for}

**Search Performed:**
```bash
grep -r "pattern" src/
# No results
```

**Impact:** {Severity of this failure}

**Required Action:** {What must be done}

---

## Goal-Backward Analysis

### Original Goals (from CONTEXT.md)

1. {Goal 1}
2. {Goal 2}

### Evidence Mapping

| Goal | Required Evidence | Found | Location |
|------|-------------------|-------|----------|
| Goal 1 | {pattern/test} | ‚úÖ/‚ùå | {path:line} |
| Goal 2 | {pattern/test} | ‚úÖ/‚ùå | {path:line} |

## Cross-Reference with Plan

| Task ID | Completed | Verified | Notes |
|---------|-----------|----------|-------|
| T{N}-001 | ‚úÖ | ‚úÖ | Evidence found |
| T{N}-002 | ‚úÖ | ‚ö†Ô∏è | Partial evidence |
| T{N}-003 | ‚ùå | ‚ùå | Task failed |

## Test Results (if applicable)

```
{Test runner output}
```

| Suite | Passed | Failed | Skipped |
|-------|--------|--------|---------|
| Unit | {n} | {n} | {n} |
| Integration | {n} | {n} | {n} |

## Recommendations

### If Verified ‚úÖ

Phase {N} has met all success criteria. Ready for transition.

### If Needs Work ‚ö†Ô∏è

The following must be addressed:

1. {Action item 1}
2. {Action item 2}

Suggested command: `/idumb:execute-phase {N}` to fix issues.

### If Blocked üö´

Cannot complete verification due to:
- {Blocking reason}

Required action: {What's needed}

---
*Generated by iDumb verification-template v0.1.0*
```

## Criterion Result Schema

```yaml
criterion_result:
  id: "C{phase}-{seq}"
  description: string
  status: "passed|partial|failed|blocked"
  
  if_passed:
    evidence: string
    locations: array<"path:line">
    
  if_partial:
    evidence: string
    gap: string
    recommendation: string
    
  if_failed:
    expected: string
    search_performed: string
    impact: "critical|major|minor"
    required_action: string
    
  if_blocked:
    reason: string
    unblocks_when: string
```

## Validation Methods Reference

```yaml
methods:
  file_exists:
    command: "test -f {path}"
    evidence: "File exists at {path}"
    
  pattern_grep:
    command: "grep -rn '{pattern}' {scope}"
    evidence: "{path}:{line}: {match}"
    
  test_passes:
    command: "{test_runner} --grep '{filter}'"
    evidence: "Test output"
    
  count_check:
    command: "grep -c '{pattern}' {path}"
    evidence: "{count} occurrences found"
```

## Generation Rules

```yaml
generation:
  required_sections:
    - summary (table with counts)
    - criteria_verification (each criterion)
    - recommendations
    
  auto_calculate:
    - pass_rate from results
    - overall status from pass_rate
    
  status_thresholds:
    verified: "pass_rate >= 80% AND no critical failures"
    needs_work: "pass_rate < 80% OR has critical failures"
    blocked: "validator cannot complete checks"
```

## Usage

```yaml
triggered_by:
  - "workflows/verify-phase.md step 5"
  - "idumb-low-validator output"
  
consumed_by:
  - "workflows/transition.md step 1"
  - "Phase completion decision"
```
